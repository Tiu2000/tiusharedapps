<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TIU Pro Scoreboard (P2P)</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        :root {
            --bg-color: #121212;
            --panel-bg: #1a1a1a;
            --led-red: #ff3333;
            --led-yellow: #ffcc00;
            --led-green: #00ff41;
            --text-color: #eeeeee;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Arial', sans-serif;
            margin: 0;
            /* MOBILE DEFAULT: Standard Scrolling Page */
            display: block;
            height: auto;
            min-height: 100vh;
            padding-bottom: 150px; /* Massive buffer for mobile controls */
            overflow-y: scroll; 
            -webkit-overflow-scrolling: touch;
        }

        /* --- WATERMARK --- */
        #watermark {
            position: fixed;
            bottom: 15px;
            right: 25px;
            font-size: 1.5rem;
            color: #fff;
            opacity: 0.15;
            font-family: 'Courier New', Courier, monospace;
            z-index: 1000;
            font-weight: 900;
            letter-spacing: 0.2em;
            pointer-events: none;
        }

        /* --- STATUS BAR --- */
        #status-bar {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: 40px;
            background: rgba(0,0,0,0.95);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            font-size: 0.8rem;
            color: #888;
            z-index: 2000;
            border-bottom: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .status-indicator { display: flex; align-items: center; gap: 8px; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: #555; }
        .dot.online { background: var(--led-green); box-shadow: 0 0 5px var(--led-green); }
        .dot.offline { background: var(--led-red); }
        .refresh-btn {
            background: #333; border: 1px solid #555; color: white;
            cursor: pointer; font-size: 0.7rem; padding: 4px 10px; border-radius: 4px;
        }

        /* --- MAIN CONTAINER --- */
        .main-container {
            margin-top: 50px; /* Clear status bar */
            width: 100%;
            padding: 10px;
            /* No flex/height constraints here on mobile */
        }

        /* --- SCOREBOARD --- */
        .scoreboard {
            background: #000;
            border: 4px solid #222;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 40px rgba(0,0,0,0.7);
            margin-bottom: 20px;
            
            /* Mobile Stack */
            display: grid;
            grid-template-columns: 1fr; 
            gap: 15px;
        }

        /* TEAM PANELS */
        .team-panel {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--panel-bg);
            border-radius: 8px;
            position: relative;
            border: 1px solid #333;
            padding: 15px 0;
        }

        .team-name {
            font-size: 1.5rem;
            font-weight: bold;
            text-transform: uppercase;
            color: #ccc;
            margin-bottom: 5px;
            cursor: pointer;
            border-bottom: 1px dashed #444;
            text-align: center;
            width: 90%;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }

        .score {
            font-family: 'Orbitron', sans-serif;
            font-size: 5rem;
            line-height: 1;
            color: var(--led-red);
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
            margin: 5px 0;
        }

        .stats-row {
            display: flex; gap: 15px; margin-top: 5px;
            align-items: center; justify-content: center;
        }
        .stat-box { text-align: center; }
        .stat-label { font-size: 0.7rem; color: #666; display: block; }
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; color: var(--led-yellow); }
        .poss-arrow { font-size: 1.5rem; color: #333; transition: all 0.2s; cursor: pointer; padding: 5px; }
        .poss-arrow.active { color: var(--led-red); text-shadow: 0 0 10px red; }

        /* CENTER (Timer) - Mobile Styles */
        .center-panel {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
            /* Mobile Order: Timer Top */
            order: -1; 
        }

        .timer {
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            color: var(--led-green);
            background: #000;
            padding: 5px 15px;
            border-radius: 8px;
            border: 2px solid #333;
            text-shadow: 0 0 15px rgba(0,255,0,0.3);
            cursor: pointer;
            margin-bottom: 10px;
            white-space: nowrap;
        }
        .timer.low-time { color: var(--led-red); text-shadow: 0 0 15px red; }

        .period-val { font-family: 'Orbitron', sans-serif; font-size: 2.5rem; color: var(--led-yellow); }

        /* --- CONTROLS --- */
        .controls-wrapper {
            background: #181818;
            border-radius: 10px;
            padding: 15px;
            /* No height constraint, let it grow */
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr; /* Mobile stack */
            gap: 15px;
        }
        
        /* Mobile Control Order: Timer -> Home -> Guest */
        .ctrl-col-timer { order: 1; }
        .ctrl-col-home { order: 2; }
        .ctrl-col-guest { order: 3; }

        .ctrl-col {
            background: #222;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-row { display: flex; gap: 8px; justify-content: center; }
        
        button {
            padding: 18px 5px; /* Big touch targets */
            font-size: 1rem; font-weight: bold;
            border: none; border-radius: 6px;
            cursor: pointer; color: white;
            transition: transform 0.1s;
            touch-action: manipulation;
        }
        button:active { transform: scale(0.96); opacity: 0.8; }
        
        .btn-score { background: #333; border: 1px solid #555; flex: 1; font-size: 1.2rem;}
        .btn-minus { background: #444; width: 50px; color: #aaa; }
        .btn-clock { background: var(--led-green); color: black; font-size: 1.2rem; }
        .btn-stop { background: var(--led-red); }
        .btn-opt { background: #333; border: 1px solid #444; font-size: 0.9rem; }
        .btn-sound { background: var(--led-yellow); color: black; width: 100%; font-weight: 900;}

        /* --- CONFIG MENUS --- */
        details { background: #111; border: 1px solid #333; border-radius: 5px; margin-top: 5px; }
        summary { padding: 15px; cursor: pointer; color: #888; font-size: 1rem; text-align: center; background: #1a1a1a; list-style: none; }
        .menu-content { padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        input { background: #222; border: 1px solid #444; color: white; padding: 12px; width: 100%; font-size: 1rem; box-sizing: border-box;}

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            display: flex; align-items: center; justify-content: center;
            z-index: 5000;
        }
        .modal-box {
            background: #222; padding: 25px; border-radius: 12px;
            width: 90%; max-width: 450px; text-align: center;
            border: 1px solid #444; box-shadow: 0 0 50px black;
        }
        .big-btn { width: 100%; padding: 15px; font-size: 1.2rem; margin: 10px 0; border-radius: 8px; background: #333; border: 1px solid #555; }
        .btn-host { background: var(--led-green); color: black; }
        .btn-join { background: #2196F3; }
        #qrcode img { margin: 0 auto; border: 10px solid white; max-width: 100%; }

        /* --- DESKTOP / WIDESCREEN APP MODE --- */
        @media (min-width: 1024px) {
            body {
                height: 100vh;
                overflow: hidden; /* Lock scroll on desktop only */
                display: flex;
                flex-direction: column;
                padding-bottom: 0;
            }
            .main-container {
                height: 100%;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }
            .scoreboard {
                flex-grow: 1;
                max-height: 65vh;
                display: grid;
                grid-template-columns: 1fr 0.8fr 1fr;
                gap: 10px;
            }
            .center-panel { order: 0; border: none; padding-bottom: 0; }
            .score { font-size: 18vh; }
            .timer { font-size: 12vh; }
            .period-val { font-size: 6vh; }
            .stat-value { font-size: 4vh; }
            
            .controls-wrapper {
                height: auto;
                overflow-y: auto;
                margin-bottom: 0;
            }
            .controls-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }
            .ctrl-col-timer { order: 0; }
            .ctrl-col-home { order: 0; }
            .ctrl-col-guest { order: 0; }
            button { padding: 10px 5px; font-size: 0.9rem; }
        }
    </style>
</head>
<body onload="init()">

    <audio id="sound-buzzer" preload="auto" src="https://info.scorevision.com/hubfs/Audio%20Files/AirHorn-3-final.mp3"></audio>
    <audio id="sound-whistle" preload="auto" src="https://gfxsounds.com/wp-content/uploads/2021/03/Referees-whistle-half-time.mp3"></audio>

    <div id="watermark">TIU</div>

    <div id="status-bar">
        <div class="status-indicator">
            <div id="conn-dot" class="dot offline"></div>
            <span id="conn-text">OFFLINE</span>
        </div>
        <button class="refresh-btn" onclick="location.reload()">â†º REFRESH</button>
    </div>

    <div id="setup-modal" class="modal-overlay">
        <div class="modal-box">
            <h1 style="color:#fff; margin-bottom: 20px;">TIU BOARD</h1>
            <button class="big-btn btn-host" onclick="setupHost()">HOST (Display)</button>
            <div style="color:#666; margin: 15px;">- OR -</div>
            <button class="big-btn btn-join" onclick="setupJoin()">JOIN (Controller)</button>
        </div>
    </div>

    <div id="host-modal" class="modal-overlay" style="display:none;">
        <div class="modal-box">
            <h2 style="color:#fff">Scan to Connect</h2>
            <div id="qrcode" style="margin: 20px 0;"></div>
            <p style="color:#888; font-size:0.9rem;">ID: <span id="host-id-display" style="color:white; font-family:monospace; font-size:1.2rem;">...</span></p>
            <button class="big-btn" onclick="startGame()">START</button>
        </div>
    </div>

    <div id="time-modal" class="modal-overlay" style="display:none;">
        <div class="modal-box">
            <h3>Set Time</h3>
            <div style="display:flex; gap:10px; justify-content:center; align-items:center;">
                <input type="number" id="set-min" placeholder="MM" style="font-size:2rem; width:80px; text-align:center;">
                <span style="font-size:2rem;">:</span>
                <input type="number" id="set-sec" placeholder="SS" style="font-size:2rem; width:80px; text-align:center;">
            </div>
            <button class="big-btn btn-host" style="margin-top:20px;" onclick="saveTime()">SET</button>
            <button class="big-btn" style="padding:10px; background:#444;" onclick="document.getElementById('time-modal').style.display='none'">CANCEL</button>
        </div>
    </div>

    <div class="main-container">
        <div class="scoreboard">
            <div class="team-panel">
                <div id="homeName" class="team-name" onclick="editName('home')">HOME</div>
                <div id="homeScore" class="score">00</div>
                <div class="stats-row">
                    <div class="poss-arrow" id="poss-home" onclick="handleInput('poss', 'home')">â—„ POSS</div>
                    <div class="stat-box">
                        <span class="stat-value" id="homeFouls">0</span>
                        <span class="stat-label">FOULS</span>
                    </div>
                </div>
            </div>

            <div class="center-panel">
                <div id="timer" class="timer" onclick="openTimeModal()">12:00</div>
                <div class="period-container">
                    <div class="stat-label">PERIOD</div>
                    <div id="period" class="period-val">1</div>
                </div>
            </div>

            <div class="team-panel">
                <div id="guestName" class="team-name" onclick="editName('guest')">GUEST</div>
                <div id="guestScore" class="score">00</div>
                <div class="stats-row">
                    <div class="stat-box">
                        <span class="stat-value" id="guestFouls">0</span>
                        <span class="stat-label">FOULS</span>
                    </div>
                    <div class="poss-arrow" id="poss-guest" onclick="handleInput('poss', 'guest')">POSS â–º</div>
                </div>
            </div>
        </div>

        <div class="controls-wrapper">
            <div class="controls-grid">
                <div class="ctrl-col ctrl-col-home" style="border-top: 3px solid var(--led-red);">
                    <div style="color:#888; font-size:0.8rem; text-align:center;">HOME</div>
                    <div class="btn-row">
                        <button class="btn-score" onclick="handleInput('score', {team:'home', val:1})">+1</button>
                        <button class="btn-score" onclick="handleInput('score', {team:'home', val:2})">+2</button>
                        <button class="btn-score" onclick="handleInput('score', {team:'home', val:3})">+3</button>
                    </div>
                    <div class="btn-row">
                        <button class="btn-minus" onclick="handleInput('score', {team:'home', val:-1})">-1</button>
                        <button class="btn-opt" style="flex:1" onclick="handleInput('foul', {team:'home', val:1})">FOUL +</button>
                        <button class="btn-opt" onclick="handleInput('foul', {team:'home', val:-1})">undo</button>
                    </div>
                </div>

                <div class="ctrl-col ctrl-col-timer">
                    <div class="btn-row">
                        <button class="btn-clock" style="flex:2" onclick="handleInput('timerToggle')">START / STOP</button>
                        <button class="btn-stop" style="flex:1" onclick="handleInput('timerReset')">RESET</button>
                    </div>
                    
                    <div class="btn-row" style="margin-top:5px;">
                        <button class="btn-opt" onclick="handleInput('period')">PER +</button>
                        <button class="btn-opt" onclick="handleInput('possToggle')">SWAP POSS</button>
                    </div>

                    <details>
                        <summary>â–¼ AUDIO / CONFIG</summary>
                        <div class="menu-content">
                            <button class="btn-sound" onclick="handleInput('sound', 'buzzer')">ðŸ”Š AIR HORN</button>
                            <button class="btn-sound" style="background:#fff; color:#000" onclick="handleInput('sound', 'whistle')">ðŸ“¢ WHISTLE</button>
                            <div style="border-top:1px solid #444; margin-top:5px; padding-top:5px; color:#666; font-size:0.8rem;">
                                Custom URLs:
                                <input type="text" id="url-buzzer" placeholder="Horn URL" onchange="updateAudioSrc()">
                                <input type="text" id="url-whistle" placeholder="Whistle URL" onchange="updateAudioSrc()">
                            </div>
                        </div>
                    </details>
                </div>

                <div class="ctrl-col ctrl-col-guest" style="border-top: 3px solid #2196F3;">
                    <div style="color:#888; font-size:0.8rem; text-align:center;">GUEST</div>
                    <div class="btn-row">
                        <button class="btn-score" onclick="handleInput('score', {team:'guest', val:1})">+1</button>
                        <button class="btn-score" onclick="handleInput('score', {team:'guest', val:2})">+2</button>
                        <button class="btn-score" onclick="handleInput('score', {team:'guest', val:3})">+3</button>
                    </div>
                    <div class="btn-row">
                        <button class="btn-minus" onclick="handleInput('score', {team:'guest', val:-1})">-1</button>
                        <button class="btn-opt" style="flex:1" onclick="handleInput('foul', {team:'guest', val:1})">FOUL +</button>
                        <button class="btn-opt" onclick="handleInput('foul', {team:'guest', val:-1})">undo</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- GLOBAL STATE ---
        let state = {
            homeName: "HOME", guestName: "GUEST",
            homeScore: 0, guestScore: 0,
            homeFouls: 0, guestFouls: 0,
            period: 1,
            timeSec: 720, // 12 mins
            isRunning: false,
            possession: 'none'
        };

        // --- P2P VARS ---
        let peer = null;
        let connections = []; // For Host
        let hostConn = null;  // For Client
        let isHost = false;
        let heartbeatInterval = null;
        let timerInterval = null;
        
        // --- INIT ---
        function init() {
            const params = new URLSearchParams(window.location.search);
            const joinId = params.get('join');
            if (joinId) {
                document.getElementById('setup-modal').style.display = 'none';
                joinGame(joinId);
            }
            render();
            // Pre-fill inputs
            document.getElementById('url-buzzer').value = document.getElementById('sound-buzzer').src;
            document.getElementById('url-whistle').value = document.getElementById('sound-whistle').src;
        }

        // --- CORE LOGIC ---
        function handleInput(type, payload) {
            let update = true;

            if (type === 'score') {
                if (payload.team === 'home') state.homeScore = Math.max(0, state.homeScore + payload.val);
                else state.guestScore = Math.max(0, state.guestScore + payload.val);
            } else if (type === 'foul') {
                if (payload.team === 'home') state.homeFouls = Math.max(0, state.homeFouls + payload.val);
                else state.guestFouls = Math.max(0, state.guestFouls + payload.val);
            } else if (type === 'period') {
                state.period = (state.period >= 4) ? 1 : state.period + 1;
            } else if (type === 'timerToggle') {
                state.isRunning = !state.isRunning;
                if(state.isRunning) startLocalTimer(); else stopLocalTimer();
            } else if (type === 'timerReset') {
                state.isRunning = false;
                state.timeSec = 720;
                stopLocalTimer();
            } else if (type === 'possToggle') {
                state.possession = (state.possession === 'home') ? 'guest' : 'home';
            } else if (type === 'poss') {
                state.possession = (state.possession === payload) ? 'none' : payload;
            } else if (type === 'name') {
                if(payload.team === 'home') state.homeName = payload.val;
                else state.guestName = payload.val;
            } else if (type === 'setTime') {
                state.timeSec = payload.val;
                render();
            } else if (type === 'sound') {
                playSound(payload);
                update = false; 
                if(isHost) broadcast({type:'sound', val:payload});
                if(!isHost && hostConn) hostConn.send({cmd:'sound', val:payload});
            }

            if (update) {
                render();
                if (isHost) broadcastState();
                else if (hostConn) hostConn.send({cmd: 'update', state: state});
            }
        }

        function startLocalTimer() {
            if(timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (state.isRunning && state.timeSec > 0) {
                    state.timeSec--;
                    render();
                    if(state.timeSec === 0) {
                        state.isRunning = false;
                        stopLocalTimer();
                        playSound('buzzer');
                    }
                }
            }, 1000);
        }

        function stopLocalTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function render() {
            document.getElementById('homeScore').textContent = state.homeScore < 10 ? "0"+state.homeScore : state.homeScore;
            document.getElementById('guestScore').textContent = state.guestScore < 10 ? "0"+state.guestScore : state.guestScore;
            document.getElementById('homeFouls').textContent = state.homeFouls;
            document.getElementById('guestFouls').textContent = state.guestFouls;
            document.getElementById('period').textContent = state.period;
            document.getElementById('homeName').textContent = state.homeName;
            document.getElementById('guestName').textContent = state.guestName;

            const m = Math.floor(state.timeSec / 60);
            const s = state.timeSec % 60;
            const tDiv = document.getElementById('timer');
            tDiv.textContent = `${m}:${s < 10 ? '0'+s : s}`;
            tDiv.className = (state.timeSec === 0) ? "timer low-time" : "timer";

            document.getElementById('poss-home').className = state.possession === 'home' ? 'poss-arrow active' : 'poss-arrow';
            document.getElementById('poss-guest').className = state.possession === 'guest' ? 'poss-arrow active' : 'poss-arrow';
        }

        function editName(team) {
            const current = team === 'home' ? state.homeName : state.guestName;
            const newName = prompt(`Name for ${team.toUpperCase()}:`, current);
            if(newName && newName.trim() !== "") {
                handleInput('name', {team: team, val: newName.substring(0, 10).toUpperCase()});
            }
        }

        function openTimeModal() {
            if(state.isRunning) return; 
            document.getElementById('time-modal').style.display = 'flex';
            const m = Math.floor(state.timeSec / 60);
            const s = state.timeSec % 60;
            document.getElementById('set-min').value = m;
            document.getElementById('set-sec').value = s;
        }

        function saveTime() {
            const m = parseInt(document.getElementById('set-min').value) || 0;
            const s = parseInt(document.getElementById('set-sec').value) || 0;
            const total = (m * 60) + s;
            handleInput('setTime', {val: total});
            document.getElementById('time-modal').style.display = 'none';
        }

        function updateAudioSrc() {
            const bUrl = document.getElementById('url-buzzer').value;
            const wUrl = document.getElementById('url-whistle').value;
            if(bUrl) document.getElementById('sound-buzzer').src = bUrl;
            if(wUrl) document.getElementById('sound-whistle').src = wUrl;
        }

        function playSound(type) {
            const audio = document.getElementById('sound-' + type);
            if(audio) {
                audio.currentTime = 0;
                audio.play().catch(e => console.log("Audio Error", e));
            }
        }

        // --- NETWORK ---
        function setStatus(status, isGood) {
            document.getElementById('conn-text').textContent = status;
            document.getElementById('conn-dot').className = isGood ? 'dot online' : 'dot offline';
        }

        function setupHost() {
            isHost = true;
            document.getElementById('setup-modal').style.display = 'none';
            document.getElementById('host-modal').style.display = 'flex';
            
            peer = new Peer(generateId());
            
            peer.on('open', (id) => {
                const joinUrl = window.location.href.split('?')[0] + "?join=" + id;
                new QRCode(document.getElementById("qrcode"), { text: joinUrl, width: 200, height: 200 });
                document.getElementById('host-id-display').textContent = id;
                setStatus("HOST: " + id, true);
            });

            peer.on('connection', (conn) => {
                connections.push(conn);
                conn.on('open', () => conn.send({type: 'state', data: state}));
                conn.on('data', (data) => {
                    if (data.cmd === 'update') {
                        state = data.state;
                        if(state.isRunning && !timerInterval) startLocalTimer();
                        if(!state.isRunning && timerInterval) stopLocalTimer();
                        render();
                        broadcastState();
                    }
                    if (data.cmd === 'sound') {
                        playSound(data.val);
                        broadcast({type:'sound', val:data.val});
                    }
                });
                conn.on('close', () => connections = connections.filter(c => c !== conn));
            });

            setInterval(() => { if(connections.length > 0) broadcast({type: 'heartbeat'}); }, 2000);
            setInterval(() => { if(state.isRunning) broadcastState(); }, 5000);
        }

        function broadcastState() { broadcast({type: 'state', data: state}); }
        function broadcast(msg) { connections.forEach(c => { if(c.open) c.send(msg); }); }

        function startGame() {
            document.getElementById('host-modal').style.display = 'none';
            new AudioContext().resume(); 
        }

        function setupJoin() {
            const manualId = prompt("Enter Game ID:");
            if(manualId) joinGame(manualId);
        }

        function joinGame(hostId) {
            isHost = false;
            setStatus("CONNECTING...", false);
            if(peer) peer.destroy();
            peer = new Peer();
            peer.on('open', () => connect(hostId));
        }

        function connect(id) {
            hostConn = peer.connect(id);
            hostConn.on('open', () => {
                setStatus("CONNECTED", true);
                document.getElementById('setup-modal').style.display = 'none';
                if(heartbeatInterval) clearInterval(heartbeatInterval);
                heartbeatInterval = setInterval(() => { if(hostConn && hostConn.open) hostConn.send({cmd: 'ping'}); }, 2000);
            });
            hostConn.on('data', (msg) => {
                if(msg.type === 'state') {
                    state = msg.data;
                    render();
                    if(state.isRunning && !timerInterval) startLocalTimer();
                    else if(!state.isRunning && timerInterval) stopLocalTimer();
                }
                if(msg.type === 'sound') playSound(msg.val);
            });
            hostConn.on('close', () => {
                setStatus("RECONNECTING...", false);
                stopLocalTimer();
                setTimeout(() => connect(id), 1000);
            });
        }

        function generateId() { return Math.random().toString(36).substring(2, 6).toUpperCase(); }
    </script>
</body>
</html>